<p>&#x5728;&#x4E0A;&#x4E00;&#x4E2A;episode&#xFF0C;&#x6211;&#x4EEC;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;form&#xFF0C;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x5D4C;&#x5957;&#x6A21;&#x578B;&#x3002;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x6709;<code>Survey</code>&#x6A21;&#x578B;&#xFF0C;&#x6BCF;&#x4E2A;<code>Survey</code>&#x6709;&#x5F88;&#x591A;<code>Questions</code> &#xFF0C;&#x6BCF;&#x4E2A;<code>Question</code>&#x6709;&#x5F88;&#x591A;<code>Answers</code>&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/300/original/E197I01.png" width="816" height="490" alt="&#x5728;&#x7F16;&#x8F91;&#x9875;&#x7684;&#x8C03;&#x67E5;&#x3002;" /> </div> <p>&#x5728;<code>Survey</code>&#x548C;<code>Question</code>model,&#x7528;<code>accepts_nested_attributes_for</code>&#x5C31;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;model&#x521B;&#x5EFA;&#xFF0C;&#x7F16;&#x8F91;&#x548C;&#x5220;&#x9664;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3002;</p> <p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#x53EA;&#x80FD;&#x7528;checkbox&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x6848;&#x3002;&#x800C;&#x4E14;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x73B0;&#x5728;&#x7684;form&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x3002;&#x5728;&#x8FD9;&#x4E00;&#x4E2A;episode&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7528;JavaScript&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;link&#x52A8;&#x6001;&#x5730;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x8FD9;&#x4E9B;models&#x3002;</p> <p>&#x6211;&#x4EEC;&#x8981;&#x5199;&#x7684;JavaScript&#x6D89;&#x53CA;DOM&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;<a href="http://www.prototypejs.org">Prototype&#x5E93;</a>&#x4F7F;&#x5B83;&#x53D8;&#x5F97;&#x5BB9;&#x6613;&#x4E9B;&#x3002;&#x82E5;&#x8981;&#x52A0;&#x5165;Prototype&#x5230;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x884C;&#x5230;&#x6DFB;&#x52A0;&#x5230;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;layout&#x7684;&lt;head&gt;&#x90E8;&#x5206;&#x3002;</p> <p class="codeFilePath">/app/views/layouts/application.html.erb</p> <pre class="ruby">
&lt;%= javascript_include_tag :defaults, :cache =&gt; true %&gt;</pre> <p>&#x5982;&#x679C;&#x4F60;&#x66F4;&#x559C;&#x6B22;&#x4F7F;&#x7528;jQuery&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x52A0;&#x5165;jQuery&#x7684;&#x5F15;&#x5165;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x8FD9;&#x4E2A;episode&#x7684;&#x7ED3;&#x5C3E;&#x5C55;&#x793A;&#x7B49;&#x4EF7;&#x7684;jQuery&#x4EE3;&#x7801;&#x3002;</p> <h3>&#x6DFB;&#x52A0;link&#x53BB;&#x5220;&#x9664;&#x56DE;&#x7B54;</h3> <p>&#x6211;&#x4EEC;&#x5148;&#x89E3;&#x51B3;&#x6700;&#x5BB9;&#x6613;&#x7684;&#x90E8;&#x5206;&#xFF1A;&#x66FF;&#x6362;&#x6211;&#x4EEC;&#x7528;&#x6765;&#x5220;&#x9664;&#x7684;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x7684;checkbox&#x4E3A;&#x94FE;&#x63A5;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x95EE;&#x9898;&#x7684;&#x90E8;&#x5206;&#x3002;</p> <p>render&#x95EE;&#x9898;&#x7684;&#x90A3;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#xFF0C;&#x5728;<code>answer_fields</code> partial&#x4E2D;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x8C61;&#x8FD9;&#x6837;&#xFF1A;</p> <p class="codeFilePath">/app/views/surveys/_answer_fields.html.erb</p> <pre class="ruby">
&lt;p&gt;
&lt;%= f.label :content, &quot;Answer&quot; %&gt;
&lt;%= f.text_field :content %&gt;
&lt;%= f.check_box :_destroy %&gt;
&lt;%= f.label :_destroy, &quot;Remove&quot; %&gt;
&lt;/p&gt;
</pre> <p>&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5220;&#x9664;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x9009;&#x4E2D;&#x4E0A;&#x9762;<code>_destroy</code>&#x7684;&#x590D;&#x9009;&#x6846;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x7528;&#x4E00;&#x4E2A;hidden field&#x66FF;&#x6362;&#x5B83;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&ldquo;remove&rdquo; link&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;hidden field&#x5C06;&#x88AB;&#x8D4B;&#x503C;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6807;&#x8BB0;&#x8FD9;&#x4E2A;&#x7B54;&#x6848;&#x662F;&#x9700;&#x8981;&#x88AB;&#x5220;&#x9664;&#x7684;&#x3002;</p> <p>&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x628A;&#x4E0A;&#x9762;name&#x4E3A;_destroy&#x7684;label&#x66FF;&#x6362;&#x6210;&#x4E00;&#x4E2A;link&#xFF0C;&#x5229;&#x7528;Rails&#x91CC;&#x7684;<code>link_to_function</code>&#xFF0C;&#x8FD9;&#x4E2A;link&#x53EF;&#x4EE5;&#x5728;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x7684;&#x65F6;&#x5019;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;JavaScript&#x7684;&#x51FD;&#x6570;&#x3002;hidden field&#x548C;link&#x90E8;&#x5206;&#x7684;&#x4EE3;&#x7801;&#x5C06;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;&#xFF1A;</p> <p class="codeFilePath">/app/views/surveys/_answer_fields.html.erb</p> <pre class="ruby">
&lt;p class=&quot;fields&quot;&gt;  &lt;%= f.label :content, &quot;Answer&quot; %&gt;
&lt;%= f.text_field :content %&gt;
&lt;%= f.hidden_field :_destroy %&gt;
&lt;%= link_to_function &quot;remove&quot;, &quot;remove_fields(this)&quot; %&gt;
&lt;/p&gt;
</pre> <p>&#x5F53;&#x7B54;&#x6848;&#x65C1;&#x8FB9;&#x7684;&ldquo;&#x5220;&#x9664;&rdquo;&#x7684;&#x94FE;&#x63A5;&#x88AB;&#x70B9;&#x51FB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;&#x53EB;&#x505A;<code>remove_fields</code>&#x7684;JavaScript&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x5C06;link&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x5165;&#xFF0C;&#x4EE5;&#x4FBF;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x53C2;&#x8003;&#x5143;&#x7D20;&#x5B83;&#x627E;&#x5230;&#x7B54;&#x6848;&#x6709;&#x5173;&#x7684;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#x3002;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x5F97;&#x5230;&#x8FD9;&#x4E9B;field&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;class&#x7ED9;&#x8FD9;&#x4E2A;&#x5C01;&#x95ED;&#x6BB5;&#x843D;&#x5143;&#x7D20; p&#xFF0C;&#x4F7F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x66F4;&#x5BB9;&#x6613;&#x5730;&#x627E;&#x5230;&#x5B83;&#x4EEC;&#x3002;</p> <p>&#x4E0B;&#x4E00;&#x6B65;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5199;<code>remove_fields</code> function&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;<code>application.js</code>&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x4F1A;&#x81EA;&#x52A8;&#x5728;&#x6211;&#x4EEC;&#x7F51;&#x9875;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x6587;&#x4EF6;&#x4E4B;&#x4E00;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5305;&#x62EC;&#x4E86;<code>:defaults</code> Javascript&#x3002;</p> <p class="codeFilePath">/public/javascripts/application.js</p> <pre class="javascript">
function remove_fields(link) {
$(link).previous(&quot;input[type=hidden]&quot;).value = &quot;1&quot;;
$(link).up(&quot;.fields&quot;).hide();}</pre> <p>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6267;&#x884C;&#x4E24;&#x4E2A;&#x52A8;&#x4F5C;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x4F7F;&#x7528;Prototype&#x7684;<a href="http://api.prototypejs.org/dom/element.html#previous-class_method"><code>previous</code></a>&#x529F;&#x80FD;&#x67E5;&#x627E;&#xFF0C;&#x548C;&#x8C03;&#x8FD9;&#x4E2A;function&#x7684;link&#x6709;&#x5173;&#x7684;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x51FA;&#x73B0;&#x7684;&#x4E0A;&#x4E00;&#x4E2A;hidden field&#xFF0C;&#x5C06;&#x5176;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;<code>1</code>&#xFF0C;&#x7B54;&#x6848;&#x5C06;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x5220;&#x9664;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;<a href="http://api.prototypejs.org/dom/element.html#up-class_method"><code>up</code></a>&#x627E;&#x5230;&#x8FD9;&#x4E2A;link&#x7684;DOM tree&#x7684;&#x4E0A;&#x6B21;&#x7B2C;&#x4E00;&#x6B21;&#x51FA;&#x73B0;&#x7684;class&#x4E3A;&ldquo;fields&rdquo;&#x7684;&#x5305;&#x88F9;&#x8FD9;&#x95EE;&#x9898;field&#x7684;p&#x6807;&#x7B7E;&#xFF0C;&#x5C06;&#x5B83;&#x9690;&#x85CF;&#x3002;&#x6240;&#x4EE5;&#x7B54;&#x6848;&#x4E5F;&#x88AB;&#x9690;&#x85CF;&#x8D77;&#x6765;&#x4E86;&#x3002;</p> <p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5237;&#x65B0;&#x9875;&#x9762;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;&#x770B;&#x5230;&#x6BCF;&#x4E2A;&#x7B54;&#x6848;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;link&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/301/original/E197I02.png" width="816" height="471" alt="&ldquo;&#x5220;&#x9664;&rdquo;&#xFF0C;&#x76EE;&#x524D;&#x5DF2;&#x7ECF;&#x6709;&#x94FE;&#x63A5;&#x66FF;&#x6362;&#x590D;&#x9009;&#x6846;"/> </div> <p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x4E86;link&#xFF0C;<code>_destroy</code>hidden field&#x7684;&#x503C;&#x5C06;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;<code>1</code>&#xFF0C;&#x6240;&#x4EE5;&#x4ED6;&#x4EEC;&#x88AB;&#x8868;&#x8BB0;&#x4E3A;&#x9700;&#x8981;&#x88AB;&#x5220;&#x9664;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x4EEC;&#x7684;form fields&#x4E5F;&#x88AB;&#x9690;&#x85CF;&#x4E86;&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/302/original/E197I03.png" width="816" height="471" alt="&#x7B54;&#x6848;&#x662F;&#x9690;&#x85CF;&#x7684;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&ldquo;&#x5220;&#x9664;&rdquo;&#x94FE;&#x63A5;&#x3002;"/> </div> <p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;link&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;AJAX&#x7684;&#x53D1;&#x9001;&#x6211;&#x4EEC;&#x66F4;&#x65B0;&#x540E;&#x7684;form&#x7684;value&#xFF0C;&#x867D;&#x7136;&#x6211;&#x4EEC;&#x7ACB;&#x5373;&#x9690;&#x85CF;&#x4E86;&#x5220;&#x9664;&#x7684;&#x7684;&#x7B54;&#x6848;&#xFF0C;&#x76F4;&#x5230;&#x6211;&#x4EEC;submit&#x8FD9;&#x4E2A;form&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x624D;&#x4F1A;&#x5F97;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x66F4;&#x65B0;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x63D0;&#x4EA4;&#x8FD9;&#x4E2A;&#x8868;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x8C03;&#x67E5;<code>show</code>&#x9875;&#x9762;&#x9875;&#x9762;&#x4E0A;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x88AB;&#x5220;&#x9664;&#x4E86;&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/303/original/E197I04.png" width="816" height="471" alt="&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x7684;&#x7B54;&#x6848;&#x5DF2;&#x7ECF;&#x88AB;&#x5220;&#x9664;&#x3002;"/> </div> <h3>&#x5220;&#x9664;&#x95EE;&#x9898;</h3> <p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;link&#x5220;&#x9664;&#x7B54;&#x6848;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x8BA8;&#x8BBA;&#x7684;&#x5982;&#x4F55;&#x5220;&#x9664;&#x95EE;&#x9898;&#x3002;&#x5220;&#x9664;&#x7B54;&#x6848;&#x548C;&#x5220;&#x9664;&#x95EE;&#x9898;&#x7684;&#x65B9;&#x6CD5;&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#x4E00;&#x4E9B;&#x6211;&#x4EEC;&#x5199;&#x8FC7;&#x7684;&#x4EE3;&#x7801;&#x3002;</p> <p>&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5BF9;&#x7B54;&#x6848;&#x505A;&#x7684;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x628A;&#x4E00;&#x4E2A;checkbox&#x548C;&#x4E00;&#x4E2A;label&#x66FF;&#x6362;&#x6210;&#x4E00;&#x4E2A;&#x9690;&#x85CF;&#x5B57;&#x6BB5;&#x548C;&#x4E00;&#x4E2A;link&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;<code>answer_fields</code> partial&#x91CC;&#x627E;&#x5230;&#x90A3;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x53EB;&#x505A;<code>link_to_remove_fields</code>&#x7684;helper&#x65B9;&#x6CD5;&#x91CC;&#xFF0C;&#x4F20;&#x5165;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5728;link&#x4E2D;&#x51FA;&#x73B0;&#x7684;lin&#x548C;form&#x53D8;&#x91CF;<code>f</code>&#x3002;</p> <p class="codeFilePath">/app/views/surveys/_answer_fields.html.erb</p> <pre class="ruby">
&lt;p class=&quot;fields&quot;&gt;
&lt;%= f.label :content, &quot;Answer&quot; %&gt;
&lt;%= f.text_field :content %&gt;
&lt;%= link_to_remove_fields &quot;remove&quot;, f %&gt;
&lt;/p&gt;
</pre> <p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5728;<code>application_helper</code>&#x6587;&#x4EF6;&#x91CC;&#x5199;&#x90A3;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p> <p class="codeFilePath">/app/helpers/application_helper.rb</p> <pre class="ruby">
# Methods added to this helper will be available to all templates in the application.
module ApplicationHelper
def link_to_remove_fields(name, f)
  f.hidden_field(:_destroy) + link_to_function(name, &quot;remove_fields(this)&quot;)
end
end
</pre> <p>&#x521B;&#x5EFA;&#x8868;&#x5355;&#x5B57;&#x6BB5;&#x7684;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x628A;<code>f.hidden_field</code>&#x751F;&#x6210;&#x7684;&#x7684;HTML&#x548C;<code>link_to_function</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;javascript&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9;partial&#x3002;</p> <p>&#x6211;&#x4EEC;&#x5728;<code>question_fields</code> partial&#x91CC;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x7684;&#x65B0;&#x65B9;&#x6CD5;&#x4E86;&#x3002;</p> <p class="codeFilePath">/app/views/surveys/_question_fields.html.erb
</p> <pre class="ruby">
&lt;div class=&quot;fields&quot;&gt;  &lt;p&gt;    &lt;%= f.label :content, &quot;Question&quot; %&gt;
  &lt;%= link_to_remove_fields &quot;remove&quot;, f%&gt;&lt;br /&gt;
  &lt;%= f.text_area :content, :rows =&gt; 3 %&gt;&lt;br /&gt;
&lt;/p&gt;
&lt;% f.fields_for :answers do |builder| %&gt;
  &lt;%= render &#39;answer_fields&#39;, :f =&gt; builder %&gt;
&lt;% end %&gt;
&lt;/div&gt;
</pre> <p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;JavaScript function <code>remove_fields</code>&#x67E5;&#x627E;&#x4E0E;&#x4E00;&#x4E2A;class&#x540D;&#x4E3A;<code>fields</code>&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x628A;&#x6211;&#x4EEC;&#x7684;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x7528;&#x4E00;&#x4E2A;class&#x540D;&#x4E3A;fields&#x7684;<code>div</code>&#x5305;&#x88F9;&#x8D77;&#x6765;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&ldquo;&#x5220;&#x9664;&rdquo;&#x7684;&#x95EE;&#x9898;&#x7684;link&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x90FD;&#x4F1A;&#x88AB;&#x9690;&#x85CF;&#x8D77;&#x6765;&#x3002;</p> <p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x8C03;&#x67E5;&#x7684;<code>edit</code>&#x9875;&#x9762;&#xFF0C;&#x5E76;&#x70B9;&#x51FB;&#x95EE;&#x9898;&#x7684;&ldquo;Remove&rdquo; link&#x7684;&#x95EE;&#x9898;&#x5C06;&#x88AB;&#x5220;&#x9664;&#x8FDE;&#x540C;&#x5176;&#x7B54;&#x6848;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#xFF0C;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x5C06;&#x5728;&#x8C03;&#x67E5;&#x4E2D;&#x5220;&#x9664;&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/304/original/E197I05.png" width="815" height="423" alt="&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x4EE5;&#x53CA;&#x5B83;&#x7684;&#x7B54;&#x6848;&#x3002;"/> </div> <h3>&#x6DFB;&#x52A0;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;</h3> <p>&#x73B0;&#x5728;&#x7684;&#x56F0;&#x96BE;&#x7684;&#x90E8;&#x5206;&#xFF1A;&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x3002;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;form&#x4E0A;&#x7684;links&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x52A8;&#x6001;&#x7684;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x548C;&#x7B54;&#x6848;&#x3002;&#x8BA9;&#x8FD9;&#x4E2A;&#x56F0;&#x96BE;&#x7684;&#x539F;&#x56E0;&#x662F;&#xFF0C;JavaScript&#x9700;&#x8981;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x4E00;&#x7CFB;&#x5217;&#x7A7A;&#x767D;fields&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x70B9;link&#x7684;&#x65F6;&#x5019;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x590D;&#x3002;</p> <p>&#x8981;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x53EB;&#x505A;<code>link_to_add_fields</code>&#x7684;application helper&#x3002;&#x6211;&#x4EEC;&#x5728;&#x9700;&#x8981;&#x4E00;&#x4E2A;link&#x53BB;&#x5728;form&#x4E0A;&#x53BB;&#x521B;&#x5EFA;&#x65B0;&#x95EE;&#x9898;&#x548C;&#x65B0;&#x7B54;&#x6848;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x4E2A;helper&#x65B9;&#x6CD5;&#x3002;&#x5BF9;&#x4E8E;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p> <p class="codeFilePath">/app/helpers/application_helper.rb</p> <pre class="ruby">
def link_to_add_fields(name, f, association)
new_object = f.object.class.reflect_on_association(association).klass.new
fields = f.fields_for(association, new_object, :child_index =&gt; &quot;new_#{association}&quot;) do |builder|
  render(association.to_s.singularize + &quot;_fields&quot;, :f =&gt; builder)
end
link_to_function(name, h(&quot;add_fields(this, \&quot;#{association}\&quot;, \&quot;#{escape_javascript(fields)}\&quot;)&quot;))
end</pre> <p>&#x8BE5;&#x65B9;&#x6CD5;&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF1A; <code>name</code> &#xFF0C;&#x8FD9;&#x5C06;&#x662F;link&#x7684;&#x6587;&#x5B57;,<code>f</code>,&#x8868;&#x5355;&#x751F;&#x6210;&#x5668;&#x5BF9;&#x8C61;&#x548C;<code>association</code>&#xFF0C;&#x5B83;&#x7684;&#x503C;&#x53EF;&#x4EE5;&#x662F;&ldquo;question&rdquo;&#x6216;&ldquo;answers&rdquo;&#x3002;</p> <p>&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x884C;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5173;&#x8054;&#x7C7B;&#x7684;&#x65B0;&#x5B9E;&#x4F8B;&#xFF0C;&#x5373;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>Question</code>&#x6216;<code>Answer</code> &#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x521B;&#x5EFA;&#x65B0;&#x7684;form fields&#x3002;</p> <p>&#x4EE3;&#x7801;&#x7684;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x4E3A;&#x90A3;&#x4E2A;&#x5BF9;&#x8C61;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;form fields&#x7684;string&#xFF0C;&#x4EE5;&#x4FBF;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5728;&#x5176;&#x4E2D;&#x52A0;&#x5165;JavaScript&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x80FD;&#x5728;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x4E00;&#x4E2A;link&#x7684;&#x65F6;&#x5019;&#x628A;&#x4ED6;&#x4EEC;&#x52A0;&#x5165;&#x5230;form&#x4E2D;&#x3002;&#x5B83;&#x662F;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x6B63;&#x786E;&#x7684;partial&#x4EE3;&#x7801;&#xFF0C;&#x4F20;&#x5165;form builder&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x552F;&#x4E00;&#x771F;&#x6B63;&#x7684;&#x65B0;&#x4E1C;&#x897F;&#x662F;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x7684;<code>:child_index</code>&#x3002;&#x6211;&#x4EEC;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4E3A;&#x4E86;&#x6211;&#x4EEC;&#x80FD;&#x5F15;&#x7528;&#x6211;&#x4EEC;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x6848;&#x7684;fields&#x3002;&#x5728;JavaScript&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x7ED9;&#x8FD9;&#x4E2A;fields&#x7684;name&#x6839;&#x636E;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x66FF;&#x6362;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x503C;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6BCF;&#x6B21;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x590D;&#xFF0C;&#x5B83;&#x5C06;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x7684;&#x65F6;&#x5019;&#x5B83;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x8BC6;&#x522B;&#x4E86;&#x3002;</p> <p>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x6B21;&#x4F7F;&#x7528;<code>link_to_function</code>&#x65B9;&#x6CD5;&#xFF0C;&#x4F20;&#x5165;link&#x7684;name&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x5BF9;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x7684;link&#x8C03;&#x7528;&#x4E00;&#x4E2A;JavaScript&#x51FD;&#x6570;<code>add_fields</code>&#xFF0C;&#x4F20;&#x5165;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;link&#x672C;&#x8EAB;&#xFF0C;association&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x901A;&#x8FC7;&#x8F6C;&#x4E49;&#x7684;form fields &#x7684;string&#x3002;</p> <p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x56DE;&#x5230;JavaScript&#x548C;&#x7F16;&#x5199;<code>add_fields</code> function&#x3002;</p> <p class="codeFilePath">/public/javascripts/application.js</p> <pre class="javascript">
function add_fields(link, association, content) {
var new_id = new Date().getTime();
var regexp = new RegExp(&quot;new_&quot; + association, &quot;g&quot;);
$(link).up().insert({
before: content.replace(regexp, new_id)
});
}</pre> <p>&#x6B64;&#x51FD;&#x6570;&#x63A5;&#x53D7;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#xFF1A;&#x88AB;&#x70B9;&#x51FB;&#x7684;link&#xFF0C;association&#x7684;&#x540D;&#x79F0;&#x548C;&#x4E00;&#x4E2A;&#x5305;&#x542B;form fields&#x7684;HTML&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x662F;&#x4E3A;&#x8FD9;&#x4E2A;form&#x5143;&#x7D20;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;id&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x6848;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x60F3;&#x8BA9;&#x4ED6;&#x4EEC;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;index&#xFF0C;&#x90A3;&#x6837;&#x5F53;&#x6211;&#x4EEC;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4ED6;&#x4EEC;&#x5C06;&#x88AB;&#x89C6;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;model&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x4F5C;&#x51FA;unique&#x7684;ID&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x66FF;&#x6362;form fields&#x4E2D;&#x7684;&ldquo;new_question&rdquo;&#x6216;&ldquo;new_answer&rdquo;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;&#x65B0;&#x7684;&#x552F;&#x4E00;ID&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x628A;form fields&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x63D2;&#x5165;&#x5230;DOM&#x4E2D;&#x7684;&#x9002;&#x5F53;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p> <p>&#x56F0;&#x96BE;&#x7684;&#x90E8;&#x5206;&#x7ED3;&#x675F;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x6240;&#x6709;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x6DFB;&#x52A0;links&#x3002;&#x5728;<code>question_fields</code> partial&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7528;<code>link_to_add_fields</code>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x6DFB;&#x52A0;&#x7B54;&#x6848;&#x7684;link&#xFF0C;&#x4F20;&#x5165;:answers&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x6709;&#x591A;&#x5404;&#x7B54;&#x6848;&#x7684;association&#x7684;&#x540D;&#x5B57;&#xFF0C;</p> <p class="codeFilePath">/app/views/surveys/_question_fields.html.erb</p> <pre class="ruby">
&lt;div class=&quot;fields&quot;&gt;
&lt;p&gt;
  &lt;%= f.label :content, &quot;Question&quot; %&gt;
  &lt;%= link_to_remove_fields &quot;remove&quot;, f %&gt;&lt;br /&gt;
  &lt;%= link_to_remove_fields &quot;remove&quot;, f %&gt;&lt;br /&gt;
&lt;/p&gt;
&lt;% f.fields_for :answers do |builder| %&gt;
  &lt;%= render &#39;answer_fields&#39;, :f =&gt; builder %&gt;
&lt;% end %&gt;
&lt;p&gt;&lt;%= link_to_add_fields &quot;Add Answer&quot;, f, :answers %&gt;&lt;/p&gt;
&lt;/div&gt;</pre> <p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x7C7B;&#x4F3C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x8C03;&#x67E5;&#x7684;form&#x4E2D;&#x6DFB;&#x52A0;&ldquo;Add Question&rdquo;&#x7684;link&#x3002;</p> <p class="codeFilePath">/app/views/surveys/_form.html.erb</p> <pre class="ruby">
&lt;% form_for @survey do |f| %&gt;
&lt;%= f.error_messages %&gt;
&lt;p&gt;    &lt;%= f.label :name %&gt;&lt;br /&gt;
  &lt;%= f.text_field :name %&gt;
&lt;/p&gt;
&lt;% f.fields_for :questions do |builder| %&gt;
  &lt;%= render &#39;question_fields&#39;, :f =&gt; builder %&gt;
&lt;% end %&gt;
&lt;p&gt;&lt;%= link_to_add_fields &quot;Add Question&quot;, f, :questions %&gt;
&lt;p&gt;&lt;%= f.submit &quot;Submit&quot; %&gt;&lt;/p&gt;
&lt;% end %&gt;
</pre> <p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5237;&#x65B0;&#x8C03;&#x67E5;&#x9875;&#x9762;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;&#x770B;&#x5230;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x6216;&#x7B54;&#x6848;&#x7684;links&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;link&#xFF0C;&#x65B0;&#x7684;field&#x4F1A;&#x51FA;&#x73B0;&#x5728;form&#x4E0A;&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/305/original/E197I06.png" width="800" height="546" alt="&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7A7A;&#x767D;&#x9886;&#x57DF;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&ldquo;&#x6DFB;&#x52A0;&#x7B54;&#x6848;&rdquo;&#x94FE;&#x63A5;&#x3002;"/> </div> <p class="title">&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&ldquo;add answer&rdquo;link&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7A7A;&#x767D;&#x7684;&#x7B54;&#x6848;&#x7684;field&#x4F1A;&#x51FA;&#x73B0;&#x5728;form&#x4E0A;&#x3002;</p> <p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5728;&#x4E0A;&#x9762;&#x65B0;&#x7B54;&#x6848;&#x7684;field&#x4E2D;&#x586B;&#x5165;&ldquo;jQuery&rdquo;&#xFF0C;&#x5E76;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#xFF0C;&#x65B0;&#x7684;&#x7B54;&#x6848;&#x5C31;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x3002;</p> <div class="imageWrapper"> <img src="http://asciicasts.com/system/photos/306/original/E197I07.png" width="801" height="375" alt="&#x65B0;&#x7684;&#x95EE;&#x9898;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x5F97;&#x5230;&#x8865;&#x5145;"/> </div> <p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x73B0;&#x5728;&#x6709;&#x4E00;&#x4E2A;&#x8868;&#x683C;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;form&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5730;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;fields&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6211;&#x4EEC;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x6B63;&#x786E;&#x7684;&#x66F4;&#x65B0;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x3002;</p> <h3>&#x5907;&#x7528;jQuery&#x4EE3;&#x7801;</h3> <p>&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x96C6;&#x5229;&#x7528;&#x7684;JavaScript&#x4EE3;&#x7801;&#xFF0C;&#x662F;&#x7528;Prototype&#x5E93;&#x5199;&#x7684;&#x3002;&#x5982;&#x679C;&#x60A8;&#x613F;&#x610F;&#x4F7F;&#x7528;jQuery&#xFF0C;&#x4EE3;&#x7801;&#x5E94;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p> <pre class="javascript">
function remove_fields(link) {
$(link).prev(&quot;input[type=hidden]&quot;).val(&quot;1&quot;);
$(link).prev(&quot;input[type=hidden]&quot;).val(&quot;1&quot;);
}
function add_fields(link, association, content) {
var new_id = new Date().getTime();
var regexp = new RegExp(&quot;new_&quot; + association, &quot;g&quot;);
$(link).parent().before(content.replace(regexp, new_id));
}</pre> <p>&#x6B64;&#x4EE3;&#x7801;&#x548C;&#x6211;&#x4EEC;&#x5199;&#x7684;Prototype&#x7684;&#x4EE3;&#x7801;&#x975E;&#x5E38;&#x7C7B;&#x4F3C;&#x3002;</p> <p>&#x4F60;&#x4EEC;&#x5F53;&#x4E2D;&#x6709;&#x4E9B;&#x4EBA;&#x8BFB;&#x8FD9;&#x96C6;&#x5FB7;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x662F;&#x6709;&#x70B9;&#x5FD0;&#x5FD1;&#x4E0D;&#x5B89;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;JavaScript&#x4E0D;&#x662F;unobtrusive&#x7684;&#x3002;&#x800C;&#x4E00;&#x4E2A;unobtrusive&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x603B;&#x6BD4;&#x6CA1;&#x6709;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x597D;&#xFF0C;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x8DB3;&#x591F;&#x7B80;&#x5355;&#xFF0C;&#x7136;&#x6211;&#x4EEC;&#x80FD;&#x5728;&#x8FD9;&#x96C6;&#x4E2D;&#x5C55;&#x793A;&#x3002;Bates&#x6B63;&#x505A;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x53EB;&#x505A;<a href="http://github.com/ryanb/nested_form">nested_form&#xFF0C;</a>&#x8FD9;&#x5C06;&#x4F7F;&#x7528;unobtrusive&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;jQuery&#x5904;&#x7406;nested forms&#x3002;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x4ECD;&#x7136;&#x5728;&#x521D;&#x671F;&#x7684;&#x53D1;&#x5C55;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8BA4;&#x4E3A;&#x4F60;&#x9700;&#x8981;&#x50CF;&#x8FD9;&#x6837;&#x63D2;&#x4EF6;&#xFF0C;&#x8BF7;&#x7EE7;&#x7EED;&#x68C0;&#x67E5;&#x540E;&#x7EED;&#x7684;&#x63D0;&#x4EA4;&#x3002;</p>