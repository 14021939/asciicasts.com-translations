<p>Rails&#x8FD1;&#x671F;&#x5347;&#x7EA7;&#x5230;&#x4E86;2.3.3&#x7248;&#x3002;&#x5C3D;&#x7BA1;&#x8FD9;&#x6B21;&#x53EA;&#x662F;&#x4E00;&#x6B21;&#x8F83;&#x5C0F;&#x7684;&#x5347;&#x7EA7;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x4E4B;&#x524D;&#x7248;&#x672C;&#x7684;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x4FEE;&#x6B63;(bug fixes), &#x8FD9;&#x4E2A;&#x65B0;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x65B0;&#x7684;&#x7279;&#x6027;(features)&#x3002;Touch&#x5C31;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x8FD9;&#x96C6;&#x4E3A;&#x5927;&#x5BB6;&#x5C55;&#x73B0;&#x5982;&#x4F55;&#x4F7F;&#x7528;<code>touch</code>&#x53BB;&#x6539;&#x8FDB;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x7F13;&#x5B58;&#x3002;</p>

<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x5347;&#x7EA7;rails&#x5230;2.3.3&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x8FD0;&#x884C;:</p>

<pre class="terminal">
sudo gem update rails
</pre>

<p>&#x5347;&#x7EA7;&#x5230;&#x65B0;&#x7248;&#x672C;. &#x7136;&#x540E;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x4F60;&#x60F3;&#x5347;&#x7EA7;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91CC;&#x9762;&#x4FEE;&#x6539;<code>/config/environment.rb</code>&#x6587;&#x4EF6;&#x7684;&#x6700;&#x4E0A;&#x9762;&#x4E00;&#x884C;:</p>

<p class="codeFilePath">/config/environment.rb</p>
<pre class="ruby">
# Specifies gem version of Rails to use when vendor/rails is not present  
RAILS_GEM_VERSION = &#x27;2.3.3&#x27; unless defined? RAILS_GEM_VERSION  
</pre> 

<p>&#x5982;&#x679C;&#x4F60;&#x51C6;&#x5907;&#x5347;&#x7EA7;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x4E2A;&#x4F18;&#x79C0;&#x7684;&#x6D4B;&#x8BD5;&#x5957;&#x4EF6;&#xFF08;test suite)&#x3002; &#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x8BE5;&#x5347;&#x7EA7;&#x4E0D;&#x4F1A;&#x5BF9;&#x7834;&#x574F;&#x4F60;&#x539F;&#x6709;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</p>

<h3>&#x4E0E;&#x7247;&#x6BB5;&#x7F13;&#x5B58;(Fragment Caching)&#x4E00;&#x8D77;&#x4F7F;&#x7528;touch</h3>

<p>&#x4EE5;&#x4E0B;&#x663E;&#x793A;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x535A;&#x5BA2;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;article&#x9875;&#x9762;&#x3002;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x7684;&#x6D41;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x6539;&#x8FDB;&#x4ED6;&#x7684;&#x6027;&#x80FD;&#x3002;</p>

<div class="imageWrapper">
  <img src="/system/photos/151/original/E172I01.png" width="823" height="551" alt ="The articles page of our application."/>
</div>

<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x7247;&#x6BB5;&#x7F13;&#x5B58;(Fragment Caching)&#x53BB;&#x7F29;&#x77ED;&#x9875;&#x9762;&#x7684;&#x76F8;&#x5E94;&#x65F6;&#x95F4;&#x3002;&#x8FD9;&#x4E2A;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x6700;&#x7406;&#x60F3;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F46;&#x5B83;&#x5374;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x7684;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x5BF9;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x5E94;&#x7528;&#x7247;&#x6BB5;&#x7F13;&#x5B58;(Fragment Caching)&#x770B;&#x770B;&#x56DE;&#x662F;&#x600E;&#x4E48;&#x6837;&#x3002;</p>

<p>&#x5728;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x7F13;&#x5B58;(caching)&#x662F;&#x9ED8;&#x8BA4;&#x88AB;&#x7981;&#x7528;&#x7684;&#x3002;&#x5E94;&#x6B64;&#x6211;&#x4EEC;&#x5148;&#x8981;&#x6253;&#x5F00;&#x7F13;&#x5B58;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FEE;&#x6539;<code>/config/environments/default.rb</code>&#x6587;&#x4EF6;:</p>

<p class="codeFilePath">/config/environments/default.rb</p>
<pre class="ruby">
config.action_controller.perform_caching = true
</pre>

<p>&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x73AF;&#x5883;&#xFF08;staging environment). &#x5982;&#x679C;&#x4F60;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x5173;&#x4E8E;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x73AF;&#x5883;&#xFF08;staging envrionment),&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href="http://railscasts.com/episodes/72-adding-an-environment">&#x7B2C;72&#x96C6;</a>. &#x5982;&#x679C;&#x4F60;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x73AF;&#x5883;(staging environment),&#x4F60;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x4F60;&#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x91CC;&#x9762;&#x6FC0;&#x6D3B;&#x6216;&#x7981;&#x7528;&#x7F13;&#x5B58;(caching)&#x3002;</p>

<p>&#x7247;&#x6BB5;&#x7F13;&#x5B58;(fragment caching)&#x5C06;&#x4F1A;&#x6DFB;&#x52A0;&#x5728;article&#x7684;<code>show</code>&#x89C6;&#x56FE;&#x5185;&#x3002;&#x89C6;&#x56FE;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>

<p class="codeFilePath">/app/views/articles/show.html.erb</p>
<pre class="ruby">
&lt;% title @article.name %&gt;  
&lt;p class=&quot;author&quot;&gt;&lt;em&gt;from &lt;%=h @article.author_name %&gt;&lt;/em&gt;&lt;/p&gt;  
&lt;%= simple_format @article.content %&gt;  
&lt;p&gt;&lt;%= link_to &quot;Back to Articles&quot;, articles_path %&gt;&lt;/p&gt;  
&lt;% unless @article.comments.empty? %&gt;  
  &lt;h2&gt;&lt;%= pluralize(@article.comments.size, &#x27;comment&#x27;) %&gt;&lt;/h2&gt;  
  &lt;div id=&quot;comments&quot;&gt;  
  &lt;% for comment in @article.comments %&gt;  
    &lt;div id=&quot;comment&quot;&gt;  
      &lt;strong&gt;&lt;%= link_to_unless comment.site_url.blank?, h(comment.author_name), h(comment.site_url) %&gt;&lt;/strong&gt;  
      &lt;em&gt;on &lt;%= comment.created_at.strftime(&#x27;%b %d, %Y at %H:%M&#x27;) %&gt;&lt;/em&gt;  
      &lt;%= simple_format comment.content %&gt;  
    &lt;/div&gt;  
  &lt;% end %&gt;  
  &lt;/div&gt;  
&lt;% end %&gt;  
&lt;h3&gt;Add your comment:&lt;/h3&gt;  
&lt;%= render :partial =&gt; &#x27;comments/form&#x27; %&gt;  
</pre> 

<p>&#x6211;&#x4EEC;&#x8C03;&#x7528;<code>cache</code>&#x65B9;&#x6CD5;&#x5E76;&#x628A;&#x8981;&#x7F13;&#x5B58;&#x7684;&#x7247;&#x6BB5;&#x5305;&#x542B;&#x5728;&#x7F13;&#x5B58;&#x5757;&#x5185;:</p>

<pre class="ruby"> 
&lt;% title @article.name %&gt;  
&lt;% cache @article do %&gt;  
  &lt;p class=&quot;author&quot;&gt;&lt;em&gt;from &lt;%=h @article.author_name %&gt;&lt;/em&gt;&lt;/p&gt;  
  &lt;!-- Rest of code omitted --&gt;  
&lt;% end %&gt;  
&lt;h3&gt;Add your comment:&lt;/h3&gt;  
&lt;%= render :partial =&gt; &#x27;comments/form&#x27; %&gt;  
</pre>

<p><code>cache</code>&#x65B9;&#x6CD5;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x53C2;&#x6570;&#x3002;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x88AB;&#x7528;&#x4F5C;&#x7F13;&#x5B58;&#x7684;key(&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9875;&#x9762;&#x7684;URL&#x4F1A;&#x88AB;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x7684;key)&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x628A;&#x6A21;&#x578B;(model)&#x5F53;&#x4F5C;&#x53C2;&#x6570;,&#x90A3;&#x4E48;&#x6A21;&#x578B;&#x7684;<code>cache_key</code>&#x5C5E;&#x6027;&#x5C06;&#x88AB;&#x4F5C;&#x4E3A;&#x8FD9;&#x4E2A;key&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;article&#x66F4;&#x65B0;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x7247;&#x6BB5;&#x5C31;&#x4F1A;&#x8FC7;&#x671F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x63A7;&#x5236;&#x53F0;(console)&#x91CC;&#x9762;&#x6F14;&#x793A;&#xFF1A;</p>


<pre class="terminal">
&gt;&gt; a = Article.first
=&gt; #&lt;Article id: 1, name: &quot;The Piano, a Marvellous Instrument&quot;, content: &quot;The piano is a musical instrument played by means o...&quot;, author_name: &quot;Billy Belmer&quot;, created_at: &quot;2009-06-14 19:39:40&quot;, updated_at: &quot;2009-07-29 19:14:17&quot;&gt;
&gt;&gt; a.cache_key
=&gt; &quot;articles/1-20090729191417&quot;
</pre>

<p><code>cache_key</code>&#x7531;&#x6A21;&#x578B;(model)&#x540D;,&#x6A21;&#x578B;&#x7684;<code>id</code>&#x548C;<code>updated_at</code>&#x5C5E;&#x6027;&#x7EC4;&#x6210;&#x3002;key&#x7684;&#x6700;&#x540E;&#x4E00;&#x6BB5;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E00;&#x6BB5;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#xFF0C;&#x8FD9;&#x4E2A;key&#x6BCF;&#x6B21;&#x90FD;&#x4F1A;&#x5E94;&#x4E3A;&#x6A21;&#x578B;&#x7684;&#x66F4;&#x65B0;&#x800C;&#x6539;&#x53D8;&#x3002;&#x8FD9;&#x6837;&#x6BCF;&#x6B21;&#x6A21;&#x578B;&#x7684;&#x4EFB;&#x610F;&#x5C5E;&#x6027;&#x6709;&#x66F4;&#x6539;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x7247;&#x6BB5;&#x90FD;&#x4F1A;&#x8FC7;&#x671F;&#x3002;</p>

<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5237;&#x65B0;2&#x6B21;&#x6211;&#x4EEC;&#x7684;article&#x9875;&#x9762;&#x6765;&#x6F14;&#x793A;&#x7F13;&#x5B58;&#x3002;&#x5728;development.log&#x91CC;&#x9762;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;:</p>

<pre class="terminal">
&nbsp; Processing ArticlesController#show (for 127.0.0.1 at 2009-07-30 20:22:30) [GET]
&nbsp;&nbsp;&nbsp; Parameters: {&quot;id&quot;=&gt;&quot;1&quot;}
&nbsp;&nbsp;&nbsp; Article Load (0.2ms)&nbsp;&nbsp; SELECT * FROM &quot;articles&quot; WHERE (&quot;articles&quot;.&quot;id&quot; = 1) 
&nbsp; Rendering /Users/eifion/rails/apps_for_asciicasts/ep172/app/views/articles/show.html.erb
&nbsp; Cached fragment hit: views/articles/1-20090729225258 (0.0ms)
&nbsp;&nbsp;&nbsp; SQL (0.2ms)&nbsp;&nbsp; SELECT count(*) AS count_all FROM &quot;comments&quot; WHERE (&quot;comments&quot;.article_id = 1) 
&nbsp;&nbsp;&nbsp; CACHE (0.0ms)&nbsp;&nbsp; SELECT count(*) AS count_all FROM &quot;comments&quot; WHERE (&quot;comments&quot;.article_id = 1) 
&nbsp;&nbsp;&nbsp; Comment Load (0.3ms)&nbsp;&nbsp; SELECT * FROM &quot;comments&quot; WHERE (&quot;comments&quot;.article_id = 1) 
&nbsp; Cached fragment miss: views/articles/1-20090729225258 (0.0ms)

&nbsp; Processing ArticlesController#show (for 127.0.0.1 at 2009-07-30 20:22:45) [GET]
&nbsp;&nbsp;&nbsp; Parameters: {&quot;id&quot;=&gt;&quot;1&quot;}
&nbsp;&nbsp;&nbsp; Article Load (0.2ms)&nbsp;&nbsp; SELECT * FROM &quot;articles&quot; WHERE (&quot;articles&quot;.&quot;id&quot; = 1) 
&nbsp; Rendering /Users/eifion/rails/apps_for_asciicasts/ep172/app/views/articles/show.html.erb
&nbsp; Cached fragment hit: views/articles/1-20090729225258 (0.0ms)
</pre>

<p>&#x7B2C;&#x4E00;&#x6B21;&#x52A0;&#x8F7D;&#x9875;&#x9762;&#x7684;&#x65F6;&#x5019;,&#x56E0;&#x4E3A;&#x7F13;&#x5B58;&#x5185;&#x6CA1;&#x6709;&#x8BE5;key&#x5BF9;&#x5E94;&#x7684;&#x7F13;&#x5B58;&#x7247;&#x6BB5;,&#x6240;&#x4EE5;&#x627E;&#x4E0D;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x7F13;&#x5B58;&#x7247;&#x6BB5;(cached fragment)&#x3002;&#x8FD9;&#x65F6;&#x6570;&#x636E;&#x5C31;&#x4F1A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x9762;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x7F13;&#x5B58;&#x3002;&#x7B2C;&#x4E8C;&#x6B21;&#x52A0;&#x8F7D;&#x9875;&#x9762;&#x7684;&#x65F6;&#x5019;&#x5BF9;&#x5E94;&#x8BE5;key&#x7684;&#x7F13;&#x5B58;&#x7247;&#x6BB5;&#x88AB;&#x627E;&#x5230;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x9762;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x3002;</p>

<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7F16;&#x8F91;article,&#x6BD4;&#x5982;&#x4FEE;&#x6539;&#x6807;&#x9898;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x7247;&#x6BB5;&#x4F1A;&#x81EA;&#x52A8;&#x5931;&#x6548;&#x5E76;&#x4E14;&#x9875;&#x9762;&#x88AB;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x65F6;&#x56E0;&#x4E3A;&#x5F53;&#x6211;&#x4EEC;&#x66F4;&#x65B0;article&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6A21;&#x578B;(model)&#x7684;<code>updated_at</code>&#x5C5E;&#x6027;&#x4E5F;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x6A21;&#x578B;&#x7684;<code>cache_key</code>&#x4E5F;&#x5E94;&#x6B64;&#x800C;&#x66F4;&#x65B0;&#x3002;</p>

<div class="imageWrapper">
  <img src="/system/photos/152/original/E172I02.png" width="841" height="471" alt ="The article page is updated when the article changes."/>
</div>

<h3>&#x4F7F;&#x7528;Touch</h3>

<p>&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6240;&#x6709;&#x7684;&#x6539;&#x52A8;&#x90FD;&#x5E94;&#x8BE5;&#x80FD;&#x5728;&#x65E9;&#x671F;&#x7248;&#x672C;&#x7684;rails&#x4E0A;&#x9762;&#x5DE5;&#x4F5C;&#x3002;&#x90A3;&#x4E48;<code>touch</code>&#x662F;&#x600E;&#x4E48;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x5C06;&#x4ECE;<code>touch</code>&#x5982;&#x4F55;&#x5728;&#x63A7;&#x5236;&#x53F0;(console) &#x4E0B;&#x9762;&#x5DE5;&#x4F5C;&#x5F00;&#x59CB;&#x8BB2;&#x8D77;:</p>

<p>&#x6211;&#x4EEC;&#x9996;&#x5148;&#x53D6;&#x5F97;&#x7B2C;&#x4E00;&#x4E2A;article&#x5E76;&#x627E;&#x5230;&#x5B83;&#x7684;<code>updated_at</code>&#x5C5E;&#x6027;&#x3002;</p>

<pre class="terminal">
&gt;&gt; a = Article.first
=&gt; #&lt;Article id: 1, name: &quot;The Piano, a Beautiful Instrument.&quot;, content: &quot;The piano is a musical instrument played by means o...&quot;, author_name: &quot;Billy Belmer&quot;, created_at: &quot;2009-06-14 19:39:40&quot;, updated_at: &quot;2009-07-29 20:27:34&quot;&gt;
&gt;&gt; a.updated_at
=&gt; Wed, 29 Jul 2009 22:27:34 UTC +00:00
</pre>

<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5BF9;article&#x8C03;&#x7528;<code>touch</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;<code>updated_at</code>&#x5C5E;&#x6027;&#x4E5F;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x3002;</p>

<pre class="terminal">
&gt;&gt; a.touch
=&gt; true
&gt;&gt; a.updated_at
=&gt; Wed, 29 Jul 2009 22:27:53 UTC +00:00
</pre>

<p>&#x8FD9;&#x5C31;&#x662F;<code>touch</code>&#x3002;&#x5F53;model&#x8C03;&#x7528;touch&#x65B9;&#x6CD5;&#xFF0C;model&#x5C31;&#x4F1A;&#x4FEE;&#x6539;&#x5B83;&#x7684;<code>updated_at</code>&#x5C5E;&#x6027;&#x503C;&#x4E3A;&#x73B0;&#x5728;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x8FD9;&#x770B;&#x8D77;&#x6765;&#x4E0D;&#x50CF;&#x4E2A;&#x7279;&#x522B;&#x6709;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5F53;&#x7528;&#x5728;associations&#x65F6;touch&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x663E;&#x793A;&#x51FA;&#x5B83;&#x7684;&#x4EF7;&#x503C;&#x3002;</p>

<p>&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91CC;&#x4E00;&#x4E2A;<code>Article</code>&#x53EF;&#x80FD;&#x6709;&#x5F88;&#x591A;<code>Comments</code>&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;article&#x9875;&#x9762;&#x7684;&#x8868;&#x5355;&#x5BF9;article&#x6DFB;&#x52A0;&#x4E00;&#x6761;comment&#xFF0C;&#x8FD9;&#x6761;comment&#x5C06;&#x4E0D;&#x4F1A;&#x4F5C;&#x4E3A;article&#x9875;&#x9762;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x88AB;&#x663E;&#x793A;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;article&#x5DF2;&#x7ECF;&#x88AB;&#x7F13;&#x5B58;&#x4E86;&#xFF0C;article&#x9875;&#x9762;&#x53EA;&#x4F1A;&#x663E;&#x793A;&#x7F13;&#x5B58;&#x91CC;&#x9762;&#x7684;comments&#x3002;&#x5F53;&#x4E00;&#x6761;comment&#x88AB;&#x6DFB;&#x52A0;&#x65F6;article&#x7684;&#x65F6;&#x95F4;&#x6233;&#x672A;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x6240;&#x4EE5;&#x7F13;&#x5B58;&#x7247;&#x6BB5;&#x4E0D;&#x4F1A;&#x8FC7;&#x671F;&#x3002;</p>

<p>&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x5F53;&#x6DFB;&#x52A0;&#x6216;&#x4FEE;&#x6539;comment&#x65F6;article&#x9875;&#x9762;&#x663E;&#x793A;&#x65B0;&#x7684;comment&#xFF0C;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x5BF9;<code>comment</code>&#x6A21;&#x578B;(model)&#x505A;&#x4E00;&#x70B9;&#x70B9;&#x4FEE;&#x6539;:</p>

<pre class="ruby">
class Comment &lt; ActiveRecord::Base  
  belongs_to :article, :touch =&gt; true  
end
</pre> 

<p>&#x7ED9;<code>belongs_to</code>&#x5173;&#x7CFB;&#x6DFB;&#x52A0; <code>:touch =&gt; true</code> &#x610F;&#x5473;&#x7740;&#x5F53;&#x521B;&#x5EFA;&#xFF0C;&#x66F4;&#x65B0;&#x6216;&#x8005;&#x5220;&#x9664;&#x4E00;&#x6761;comment&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BE5;comment&#x5C5E;&#x4E8E;(belongs_to)&#x7684;article&#x88AB;touched&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E00;&#x6761;comment&#xFF0C;&#x7F13;&#x5B58;&#x4F1A;&#x5931;&#x6548;&#x5E76;&#x4E14;&#x9875;&#x9762;&#x4F1A;&#x66F4;&#x65B0;&#x800C;&#x4E14;&#x663E;&#x793A;&#x521A;&#x6DFB;&#x52A0;&#x7684;comment&#x3002;</p>

<div class="imageWrapper">
  <img src="/system/photos/153/original/E172I03.png" width="812" height="655" alt ="The article page is updated when the article changes."/>
</div> 

<p>&#x8FD9;&#x9879;&#x6280;&#x672F;&#x4E0D;&#x4EC5;&#x9650;&#x5728;&#x7247;&#x6BB5;&#x7F13;&#x5B58;(fragment caching)&#x4E0A;&#x4F7F;&#x7528;&#x3002;touch&#x4E5F;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x548C;Memcached&#x5DE5;&#x4F5C;&#xFF0C;&#x5F53;&#x65B0;&#x7F13;&#x5B58;&#x521B;&#x5EFA;&#x65F6;Memcached&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x9664;&#x65E7;&#x7F13;&#x5B58;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;sweepers&#x66F4;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x5199;&#x4E00;&#x5806;sweepers&#x9700;&#x8981;&#x7684;&#x591A;&#x4F59;&#x4EE3;&#x7801;&#x3002;</p>